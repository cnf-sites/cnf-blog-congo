<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="rgb(255,255,255)"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Spring WS - SOAP Tolerant Reader Example &#183; CodeNotFound</title><meta name=title content="Spring WS - SOAP Tolerant Reader Example &#183; CodeNotFound"><meta name=description content="A detailed step-by-step tutorial on how to implement a SOAP tolerant reader using Spring-WS and Spring Boot."><link rel=canonical href=https://codenotfound.com/spring-ws-soap-tolerant-reader-example.html><link type=text/css rel=stylesheet href=/css/main.bundle.min.53352e9ffc441cd3959b7ecac29943a36a9950ad5d92ae00b1cd3fcfef17c757dd0fc99483a8e398aa19d5d0403773ef50573ab0a1339e4271cd2259cacbcef6.css integrity="sha512-UzUun/xEHNOVm37KwplDo2qZUK1dkq4Asc0/z+8Xx1fdD8mUg6jjmKoZ1dBAN3PvUFc6sKEznkJxzSJZysvO9g=="><script type=text/javascript src=/js/appearance.min.1e44157c1e51b46341ce2c94716dd3dd1ef30c28e7d1c9f3b9db80877bfe72bc66b00d8a662f317840016acbed93c5f18c3d9268c8b957021ee74d0b04adf6c5.js integrity="sha512-HkQVfB5RtGNBziyUcW3T3R7zDCjn0cnzuduAh3v+crxmsA2KZi8xeEABasvtk8XxjD2SaMi5VwIe500LBK32xQ=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.9947db70e5b36e741e53f8531bd734741b3fc7a688f7b5d749fc5433c48efc252f47bdf44e471570a550fc051b87712799014040e6349b38d64448b94e84e45a.js integrity="sha512-mUfbcOWzbnQeU/hTG9c0dBs/x6aI97XXSfxUM8SO/CUvR730TkcVcKVQ/AUbh3EnmQFAQOY0mzjWREi5ToTkWg==" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Spring WS - SOAP Tolerant Reader Example"><meta property="og:description" content="A detailed step-by-step tutorial on how to implement a SOAP tolerant reader using Spring-WS and Spring Boot."><meta property="og:type" content="article"><meta property="og:url" content="https://codenotfound.com/spring-ws-soap-tolerant-reader-example.html"><meta property="article:section" content="blog"><meta property="article:published_time" content="2017-07-20T00:00:00+00:00"><meta property="article:modified_time" content="2017-07-20T00:00:00+00:00"><meta property="og:site_name" content="CodeNotFound"><meta name=twitter:card content="summary"><meta name=twitter:title content="Spring WS - SOAP Tolerant Reader Example"><meta name=twitter:description content="A detailed step-by-step tutorial on how to implement a SOAP tolerant reader using Spring-WS and Spring Boot."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Blog","name":"Spring WS - SOAP Tolerant Reader Example","headline":"Spring WS - SOAP Tolerant Reader Example","abstract":"A detailed step-by-step tutorial on how to implement a SOAP tolerant reader using Spring-WS and Spring Boot.","inLanguage":"en","url":"https:\/\/codenotfound.com\/spring-ws-soap-tolerant-reader-example.html","author":{"@type":"Person","name":"CodeNotFound"},"copyrightYear":"2017","dateCreated":"2017-07-20T00:00:00\u002b00:00","datePublished":"2017-07-20T00:00:00\u002b00:00","dateModified":"2017-07-20T00:00:00\u002b00:00","keywords":["posts","spring","spring ws"],"mainEntityOfPage":"true","wordCount":"2440"}]</script><meta name=author content="CodeNotFound"><link href=https://github.com/code-not-found rel=me><link href=https://stackoverflow.com/users/4201470/codenotfound rel=me><link href=https://twitter.com/CodeNotFoundcom rel=me></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral print:hidden sm:py-10"><nav class="flex items-start justify-between sm:items-center"><div class="flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>CodeNotFound</a></div><ul class="flex list-none flex-col ltr:text-right rtl:text-left sm:flex-row"><li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/blog/ title=Blog>Blog</a></li><li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tutorials/ title=Tutorials>Tutorials</a></li><li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/about/ title=About>About</a></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header class=max-w-prose><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Spring WS - SOAP Tolerant Reader Example</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><span title="Reading time">12 mins</span></div></div></header><section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert"><div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last"><div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden"><details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#general-project-setup>General Project Setup</a></li><li><a href=#wrap-the-data-payload-behind-a-convenient-object>Wrap the Data Payload Behind a Convenient Object</a></li><li><a href=#make-minimum-assumptions-about-the-structure>Make Minimum Assumptions About the Structure</a></li><li><a href=#only-take-the-elements-you-need>Only Take the Elements You Need</a></li><li><a href=#testing-the-tolerant-reader-setup>Testing the Tolerant Reader Setup</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><p>The <a href=https://martinfowler.com/bliki/TolerantReader.html target=_blank>tolerant reader pattern</a> was coined by Martin Fowler as a way to reduce the coupling between the consumer and provider of a web service. The pattern tries to minimize the impact on existing consumers in case the service contract changes.</p><p>Fowler highlights three main points when working with XML:</p><ul><li><em>Only take the elements you need</em></li><li><em>Make minimum assumptions about the structure</em></li><li><em>Wrap the data payload behind a convenient object</em></li></ul><p>The following example will apply the tolerant reader design pattern to both the consumer and provider of a SOAP web service implemented using Spring-WS, Spring Boot, and Maven.</p><div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"><span class="text-primary-400 ltr:pr-3 rtl:pl-3"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentcolor" d="M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438.0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1H112L112.1 454.3zM191.4.0132C89.44.3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8 16.53 18.84 42.34 58.23 52.22 91.45.0313.25.0938.5166.125.7823h160.2c.0313-.2656.0938-.5166.125-.7823 9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1 368 78.61 288.9-.2837 191.4.0132zM192 96.01c-44.13.0-80 35.89-80 79.1.0 9.69-7.2 16.89-16 16.89S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1 8.844.0 16 7.159 16 16S200.8 96.01 192 96.01z"/></svg></span></span><span class=dark:text-neutral-300>If you want to learn more about Spring WS - head on over to the <a href=https://codenotfound.com/spring-ws-tutorials/ target=_blank>Spring WS tutorials</a> page.</span></div><h2 id=general-project-setup class="relative group">General Project Setup <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#general-project-setup aria-label=Anchor>#</a></span></h2><p>Tools used:</p><ul><li>Spring-WS 2.4</li><li>Spring Boot 1.5</li><li>Maven 3.5</li></ul><p>When describing the tolerant pattern, Fowler uses the example of an order history service. As Spring-WS is contract first only, we need to start by creating a <code>orderhistory.wsdl</code> service WSDL file. This SOAP service has a single <code>'getOrderHistory'</code> operation that takes as input a user ID and returns the full order history of that user.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;wsdl:definitions</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;OrderHistory&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>targetNamespace=</span><span style=color:#e6db74>&#34;http://codenotfound.com/services/orderhistory&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xmlns:tns=</span><span style=color:#e6db74>&#34;http://codenotfound.com/services/orderhistory&#34;</span> <span style=color:#a6e22e>xmlns:types=</span><span style=color:#e6db74>&#34;http://codenotfound.com/types/orderhistory&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xmlns:soap=</span><span style=color:#e6db74>&#34;http://schemas.xmlsoap.org/wsdl/soap/&#34;</span> <span style=color:#a6e22e>xmlns:wsdl=</span><span style=color:#e6db74>&#34;http://schemas.xmlsoap.org/wsdl/&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;wsdl:types&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;xsd:schema</span> <span style=color:#a6e22e>targetNamespace=</span><span style=color:#e6db74>&#34;http://codenotfound.com/types/orderhistory&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>xmlns:tns=</span><span style=color:#e6db74>&#34;http://codenotfound.com/types/orderhistory&#34;</span> <span style=color:#a6e22e>xmlns:xsd=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>elementFormDefault=</span><span style=color:#e6db74>&#34;qualified&#34;</span> <span style=color:#a6e22e>attributeFormDefault=</span><span style=color:#e6db74>&#34;unqualified&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>version=</span><span style=color:#e6db74>&#34;1.0&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;xsd:element</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;getOrderHistoryRequest&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;xsd:complexType&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;xsd:sequence&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;xsd:element</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;userId&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;xsd:string&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;/xsd:sequence&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/xsd:complexType&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/xsd:element&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;xsd:element</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;getOrderHistoryResponse&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;xsd:complexType&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;xsd:sequence&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;xsd:element</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;orderHistory&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;types:OrderHistoryType&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;/xsd:sequence&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/xsd:complexType&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/xsd:element&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;xsd:complexType</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;OrderHistoryType&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;xsd:sequence&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;xsd:element</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;orderList&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;tns:OrderListType&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/xsd:sequence&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/xsd:complexType&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;xsd:complexType</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;OrderListType&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;xsd:sequence&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;xsd:element</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;order&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;tns:OrderType&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>minOccurs=</span><span style=color:#e6db74>&#34;0&#34;</span> <span style=color:#a6e22e>maxOccurs=</span><span style=color:#e6db74>&#34;unbounded&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/xsd:sequence&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/xsd:complexType&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;xsd:complexType</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;OrderType&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;xsd:sequence&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;xsd:element</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;orderId&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;xsd:string&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/xsd:sequence&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/xsd:complexType&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/xsd:schema&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/wsdl:types&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;wsdl:message</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;GetOrderHistoryRequest&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;wsdl:part</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;GetOrderHistoryRequest&#34;</span> <span style=color:#a6e22e>element=</span><span style=color:#e6db74>&#34;types:getOrderHistoryRequest&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/wsdl:message&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;wsdl:message</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;GetOrderHistoryResponse&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;wsdl:part</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;GetOrderHistoryResponse&#34;</span> <span style=color:#a6e22e>element=</span><span style=color:#e6db74>&#34;types:getOrderHistoryResponse&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/wsdl:message&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;wsdl:portType</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;OrderHistory_PortType&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;wsdl:operation</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;getOrderHistory&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;wsdl:input</span> <span style=color:#a6e22e>message=</span><span style=color:#e6db74>&#34;tns:GetOrderHistoryRequest&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;wsdl:output</span> <span style=color:#a6e22e>message=</span><span style=color:#e6db74>&#34;tns:GetOrderHistoryResponse&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/wsdl:operation&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/wsdl:portType&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;wsdl:binding</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;OrderHistory_SoapBinding&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;tns:OrderHistory_PortType&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;soap:binding</span> <span style=color:#a6e22e>style=</span><span style=color:#e6db74>&#34;document&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>transport=</span><span style=color:#e6db74>&#34;http://schemas.xmlsoap.org/soap/http&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;wsdl:operation</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;getOrderHistory&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;soap:operation</span> <span style=color:#a6e22e>soapAction=</span><span style=color:#e6db74>&#34;http://codenotfound.com/services/getOrderHistory&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;wsdl:input&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;soap:body</span> <span style=color:#a6e22e>use=</span><span style=color:#e6db74>&#34;literal&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/wsdl:input&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;wsdl:output&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;soap:body</span> <span style=color:#a6e22e>use=</span><span style=color:#e6db74>&#34;literal&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/wsdl:output&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/wsdl:operation&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/wsdl:binding&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;wsdl:service</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;OrderHistory_Service&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;wsdl:documentation&gt;</span>Order History service<span style=color:#f92672>&lt;/wsdl:documentation&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;wsdl:port</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;OrderHistory_Port&#34;</span> <span style=color:#a6e22e>binding=</span><span style=color:#e6db74>&#34;tns:OrderHistory_SoapBinding&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;soap:address</span> <span style=color:#a6e22e>location=</span><span style=color:#e6db74>&#34;http://localhost:9090/codenotfound/ws/orderhistory&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/wsdl:port&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/wsdl:service&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/wsdl:definitions&gt;</span>
</span></span></code></pre></div><p>The main setup of this project is based on a previous <a href=https://codenotfound.com/spring-ws-example.html>Spring WS step by step example</a>. As such we won&rsquo;t go into detail about the basic configuration of Spring-WS in combination with Spring Boot and Maven.</p><h2 id=wrap-the-data-payload-behind-a-convenient-object class="relative group">Wrap the Data Payload Behind a Convenient Object <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#wrap-the-data-payload-behind-a-convenient-object aria-label=Anchor>#</a></span></h2><p>Let&rsquo;s create two simple objects that will wrap the received order history. This will reduce coupling with the rest of the application code and shield it from future changes to the order history service.</p><p>First object is a simple <code>Order</code> <a href=https://en.wikipedia.org/wiki/Plain_old_Java_object target=_blank>POJO</a> that contains an order ID.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.codenotfound.ws.model<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Order</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> String orderId<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Order</span><span style=color:#f92672>(</span>String orderId<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>orderId</span> <span style=color:#f92672>=</span> orderId<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getOrderId</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> orderId<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setOrderId</span><span style=color:#f92672>(</span>String orderId<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>orderId</span> <span style=color:#f92672>=</span> orderId<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Order[orderId=&#34;</span> <span style=color:#f92672>+</span> orderId <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;]&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>The second <code>OrderHistory</code> class wraps the above <code>Order</code> in a list.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.codenotfound.ws.model<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.List<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>OrderHistory</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>Order<span style=color:#f92672>&gt;</span> orders<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>Order<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getOrders</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> orders<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setOrders</span><span style=color:#f92672>(</span>List<span style=color:#f92672>&lt;</span>Order<span style=color:#f92672>&gt;</span> orders<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>orders</span> <span style=color:#f92672>=</span> orders<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=make-minimum-assumptions-about-the-structure class="relative group">Make Minimum Assumptions About the Structure <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#make-minimum-assumptions-about-the-structure aria-label=Anchor>#</a></span></h2><p>As we are working with XML, we can use <a href=https://en.wikipedia.org/wiki/XPath target=_blank>XPath</a>&rsquo;s recursive descent operator (<code>//</code>) in order to search for a specific element. This way we can extract the orders from the response message without specifying the full path. As a result, our client will not break in case the service provider changes the location of the orders in the XML. We will illustrate this with a unit test case further below.</p><p>This principle is applied when extracting the orders as well as the needed attributes from an order (in this example the order id). Both queries are defined in the <code>application.yml</code> as shown below.</p><p>To select the needed element(s) we use the <code>'local-name()'</code> function which ignores the namespace and returns the query results as if the XML did not have any namespace. This way of working increases the tolerance in case the namespace of the response would change (for example if it contains a version number).</p><blockquote><p>Note the use of the &ldquo;.&rdquo; (dot) in the second expression as we want to search for the <code>'orderId'</code> in the <a href=https://www.w3schools.com/xml/xpath_syntax.asp target=_blank>current document</a>.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>client</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>default-uri</span>: <span style=color:#ae81ff>http://localhost:9090/codenotfound/ws/orderhistory</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>xpath</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>order</span>: <span style=color:#ae81ff>//*[local-name()=&#39;order&#39;]</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>order-id</span>: <span style=color:#ae81ff>.//*[local-name()=&#39;orderId&#39;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>server</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>port</span>: <span style=color:#ae81ff>9090</span>
</span></span></code></pre></div><p>The above-defined XPath queries are applied using <code>XPathExpression</code> from Spring-WS. This is an abstraction over a <a href=https://docs.spring.io/spring-ws/docs/2.4.2.RELEASE/reference/#xpath-expression target=_blank>compiled XPath expression</a>.</p><p>The expressions are first loaded via the <code>@Value</code> annotation and then used to create the <code>'orderIdXPath'</code> and <code>'orderIdXPath'</code> <code>XPathExpression</code> beans.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.codenotfound.ws.client<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Value<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.annotation.Bean<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.annotation.Configuration<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.oxm.jaxb.Jaxb2Marshaller<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.client.core.WebServiceTemplate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.xml.xpath.XPathExpression<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.xml.xpath.XPathExpressionFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ClientConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${client.default-uri}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> String defaultUri<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${client.xpath.order}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> String orderXPath<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${client.xpath.order-id}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> String orderIdXPath<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> XPathExpression <span style=color:#a6e22e>orderXPath</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> XPathExpressionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>createXPathExpression</span><span style=color:#f92672>(</span>orderXPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> XPathExpression <span style=color:#a6e22e>orderIdXPath</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> XPathExpressionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>createXPathExpression</span><span style=color:#f92672>(</span>orderIdXPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>  Jaxb2Marshaller <span style=color:#a6e22e>jaxb2Marshaller</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Jaxb2Marshaller jaxb2Marshaller <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Jaxb2Marshaller<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    jaxb2Marshaller<span style=color:#f92672>.</span><span style=color:#a6e22e>setContextPath</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.codenotfound.types.orderhistory&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> jaxb2Marshaller<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> WebServiceTemplate <span style=color:#a6e22e>webServiceTemplate</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    WebServiceTemplate webServiceTemplate <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> WebServiceTemplate<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    webServiceTemplate<span style=color:#f92672>.</span><span style=color:#a6e22e>setMarshaller</span><span style=color:#f92672>(</span>jaxb2Marshaller<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    webServiceTemplate<span style=color:#f92672>.</span><span style=color:#a6e22e>setUnmarshaller</span><span style=color:#f92672>(</span>jaxb2Marshaller<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    webServiceTemplate<span style=color:#f92672>.</span><span style=color:#a6e22e>setDefaultUri</span><span style=color:#f92672>(</span>defaultUri<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> webServiceTemplate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=only-take-the-elements-you-need class="relative group">Only Take the Elements You Need <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#only-take-the-elements-you-need aria-label=Anchor>#</a></span></h2><p>Now that we have created our XPath expressions we will use them in the client. First, we create the request message that contains the user ID for which the order history needs to be retrieved. Note that for the creation we can use the JAXB generated objects as the tolerant reader pattern only applies to messages that are read (received).</p><p>As we want to apply the <code>XPathExpression</code> we need to use the <code>sendSourceAndReceiveToResult()</code> method of the <code>WebServiceTemplate</code> which will provide us with a <code>Result</code>. We get the <code>Source</code> from our JAXB <code>GetOrderHistoryRequest</code> object by marshaling it using the <code>MarshallingUtils</code> provided by Spring-WS.</p><p>Once we have received the request we only fetch the orders and ignore everything else. For each order, we use a <code>NodeMapper</code> to perform the actual work of mapping each node to a corresponding <code>Order</code> object. Again we only take the <code>'orderId'</code> element from each node and we ignore the rest.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.codenotfound.ws.client<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.IOException<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.List<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.xml.transform.dom.DOMResult<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.slf4j.Logger<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.slf4j.LoggerFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Autowired<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.stereotype.Component<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.WebServiceMessage<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.client.core.WebServiceTemplate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.support.MarshallingUtils<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.xml.xpath.NodeMapper<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.xml.xpath.XPathExpression<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.w3c.dom.Node<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.codenotfound.types.orderhistory.GetOrderHistoryRequest<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.codenotfound.types.orderhistory.ObjectFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.codenotfound.ws.model.Order<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.codenotfound.ws.model.OrderHistory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Component</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>OrderHistoryClient</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Logger LOGGER <span style=color:#f92672>=</span> LoggerFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>getLogger</span><span style=color:#f92672>(</span>OrderHistoryClient<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> XPathExpression orderXPath<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> XPathExpression orderIdXPath<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> WebServiceTemplate webServiceTemplate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> OrderHistory <span style=color:#a6e22e>getOrderHistory</span><span style=color:#f92672>(</span>String userId<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// create the request
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    ObjectFactory factory <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObjectFactory<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    GetOrderHistoryRequest getOrderHistoryRequest <span style=color:#f92672>=</span> factory<span style=color:#f92672>.</span><span style=color:#a6e22e>createGetOrderHistoryRequest</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    getOrderHistoryRequest<span style=color:#f92672>.</span><span style=color:#a6e22e>setUserId</span><span style=color:#f92672>(</span>userId<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// marshal the request
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    WebServiceMessage request <span style=color:#f92672>=</span> webServiceTemplate<span style=color:#f92672>.</span><span style=color:#a6e22e>getMessageFactory</span><span style=color:#f92672>().</span><span style=color:#a6e22e>createWebServiceMessage</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    MarshallingUtils<span style=color:#f92672>.</span><span style=color:#a6e22e>marshal</span><span style=color:#f92672>(</span>webServiceTemplate<span style=color:#f92672>.</span><span style=color:#a6e22e>getMarshaller</span><span style=color:#f92672>(),</span> getOrderHistoryRequest<span style=color:#f92672>,</span> request<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// call the service
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    DOMResult responseResult <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DOMResult<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    webServiceTemplate<span style=color:#f92672>.</span><span style=color:#a6e22e>sendSourceAndReceiveToResult</span><span style=color:#f92672>(</span>request<span style=color:#f92672>.</span><span style=color:#a6e22e>getPayloadSource</span><span style=color:#f92672>(),</span> responseResult<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// extract the needed elements
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    List<span style=color:#f92672>&lt;</span>Order<span style=color:#f92672>&gt;</span> orders <span style=color:#f92672>=</span> orderXPath<span style=color:#f92672>.</span><span style=color:#a6e22e>evaluate</span><span style=color:#f92672>(</span>responseResult<span style=color:#f92672>.</span><span style=color:#a6e22e>getNode</span><span style=color:#f92672>(),</span> <span style=color:#66d9ef>new</span> NodeMapper<span style=color:#f92672>&lt;</span>Order<span style=color:#f92672>&gt;()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>public</span> Order <span style=color:#a6e22e>mapNode</span><span style=color:#f92672>(</span>Node node<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> nodeNum<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// get the orderId
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        String orderId <span style=color:#f92672>=</span> orderIdXPath<span style=color:#f92672>.</span><span style=color:#a6e22e>evaluateAsString</span><span style=color:#f92672>(</span>node<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// create an order
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        Order order <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Order<span style=color:#f92672>(</span>orderId<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        LOGGER<span style=color:#f92672>.</span><span style=color:#a6e22e>info</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;found &#34;</span> <span style=color:#f92672>+</span> order<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> order<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    OrderHistory result <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> OrderHistory<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    result<span style=color:#f92672>.</span><span style=color:#a6e22e>setOrders</span><span style=color:#f92672>(</span>orders<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> result<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>For the implementation of the <code>Endpoint</code>, we will also apply the above principles to the received messages.</p><p>By annotating a parameter of the handling method with <code>@XPathParam</code> we can bind it to the <a href=https://docs.spring.io/spring-ws/docs/2.4.2.RELEASE/reference/#server-xpath-param target=_blank>evaluation of an XPath expression</a>. In other words we only need to specify the elements we need as parameters of the handling method annotated with <code>@XPathParam</code>. This way we only get what we need with a minimal assumption on the received structure.</p><p>In the <code>OrderHistoryEndpoint</code> we define the XPath expression to extract the user ID and then define it as a parameter of the <code>getOrderHistory()</code> handling method.</p><p>In this tutorial we simply log the received <code>'userId'</code>. In a real-life example typically a database lookup would be performed to retrieve the user&rsquo;s orders. In the below code we simply generate a fix response that contains three orders.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.codenotfound.ws.endpoint<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.slf4j.Logger<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.slf4j.LoggerFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.server.endpoint.annotation.Endpoint<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.server.endpoint.annotation.Namespace<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.server.endpoint.annotation.PayloadRoot<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.server.endpoint.annotation.ResponsePayload<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.server.endpoint.annotation.XPathParam<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.codenotfound.types.orderhistory.GetOrderHistoryResponse<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.codenotfound.types.orderhistory.ObjectFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.codenotfound.types.orderhistory.OrderHistoryType<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.codenotfound.types.orderhistory.OrderListType<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.codenotfound.types.orderhistory.OrderType<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Endpoint</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>OrderHistoryEndpoint</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Logger LOGGER <span style=color:#f92672>=</span> LoggerFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>getLogger</span><span style=color:#f92672>(</span>OrderHistoryEndpoint<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> String userIdXPath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;//*[local-name()=&#39;userId&#39;]&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@PayloadRoot</span><span style=color:#f92672>(</span>namespace <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;http://codenotfound.com/types/orderhistory&#34;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>      localPart <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;getOrderHistoryRequest&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Namespace</span><span style=color:#f92672>(</span>prefix <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;oh&#34;</span><span style=color:#f92672>,</span> uri <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;http://codenotfound.com/types/orderhistory&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@ResponsePayload</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> GetOrderHistoryResponse <span style=color:#a6e22e>getOrderHistory</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@XPathParam</span><span style=color:#f92672>(</span>userIdXPath<span style=color:#f92672>)</span> String userId<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    LOGGER<span style=color:#f92672>.</span><span style=color:#a6e22e>info</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;received request for order history of userId={}&#34;</span><span style=color:#f92672>,</span> userId<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// fetch the order history for the received user
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    ObjectFactory factory <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObjectFactory<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    OrderListType orderListType <span style=color:#f92672>=</span> factory<span style=color:#f92672>.</span><span style=color:#a6e22e>createOrderListType</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      OrderType orderType <span style=color:#f92672>=</span> factory<span style=color:#f92672>.</span><span style=color:#a6e22e>createOrderType</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>      orderType<span style=color:#f92672>.</span><span style=color:#a6e22e>setOrderId</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;order&#34;</span> <span style=color:#f92672>+</span> i<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>      orderListType<span style=color:#f92672>.</span><span style=color:#a6e22e>getOrder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>orderType<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    OrderHistoryType orderHistoryType <span style=color:#f92672>=</span> factory<span style=color:#f92672>.</span><span style=color:#a6e22e>createOrderHistoryType</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    orderHistoryType<span style=color:#f92672>.</span><span style=color:#a6e22e>setOrderList</span><span style=color:#f92672>(</span>orderListType<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    GetOrderHistoryResponse result <span style=color:#f92672>=</span> factory<span style=color:#f92672>.</span><span style=color:#a6e22e>createGetOrderHistoryResponse</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    result<span style=color:#f92672>.</span><span style=color:#a6e22e>setOrderHistory</span><span style=color:#f92672>(</span>orderHistoryType<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> result<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=testing-the-tolerant-reader-setup class="relative group">Testing the Tolerant Reader Setup <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#testing-the-tolerant-reader-setup aria-label=Anchor>#</a></span></h2><p>In order to test whether our example complies with the tolerant reader principles, we will be using the <code>MockWebServiceServer</code> and <code>MockWebServiceClient</code> classes provided by Spring-WS. These allow us to freely define the XML messages that are sent/received to/from our client and server implementations.</p><p><code>OrderHistoryClientTest</code> contains a number of unit tests for the client. The first <code>testGetOrderHistory()</code> test case verifies the correct working of the client code.</p><p>The second <code>testGetOrderHistoryOnlyNeededElements()</code> test case simulates the scenario in which the service has evolved. The orders that are being returned now contain an <code>'orderName'</code> element in addition to the <code>'orderId'</code> element. As we are only extracting the elements that we need, our client code should not break.</p><p>Finally, the <code>testGetOrderHistoryMinimumAssumptions()</code> test case illustrates that even when the order history is moved into a <code>'newWrapper'</code> element, the client code continues to work as it searches for the orders as opposed to using an absolute path.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.codenotfound.ws.client<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import static</span> org.assertj.core.api.Assertions.assertThat<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import static</span> org.springframework.ws.test.client.RequestMatchers.payload<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import static</span> org.springframework.ws.test.client.ResponseCreators.withPayload<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.IOException<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.xml.transform.Source<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.Before<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.Test<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.runner.RunWith<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Autowired<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.boot.test.context.SpringBootTest<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.test.context.junit4.SpringRunner<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.client.core.WebServiceTemplate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.test.client.MockWebServiceServer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.xml.transform.StringSource<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.codenotfound.ws.model.OrderHistory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RunWith</span><span style=color:#f92672>(</span>SpringRunner<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SpringBootTest</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>OrderHistoryClientTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> OrderHistoryClient orderHistoryClient<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> WebServiceTemplate webServiceTemplate<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> MockWebServiceServer mockWebServiceServer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Before</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>createServer</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    mockWebServiceServer <span style=color:#f92672>=</span> MockWebServiceServer<span style=color:#f92672>.</span><span style=color:#a6e22e>createServer</span><span style=color:#f92672>(</span>webServiceTemplate<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testGetOrderHistory</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Source requestPayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns1:getOrderHistoryRequest xmlns:ns1=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:userId&gt;abc123&lt;/ns1:userId&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:getOrderHistoryRequest&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Source responsePayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns1:getOrderHistoryResponse xmlns:ns1=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:orderList&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:order&gt;&lt;ns1:orderId&gt;order1&lt;/ns1:orderId&gt;&lt;/ns1:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:order&gt;&lt;ns1:orderId&gt;order2&lt;/ns1:orderId&gt;&lt;/ns1:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:order&gt;&lt;ns1:orderId&gt;order3&lt;/ns1:orderId&gt;&lt;/ns1:order&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:orderList&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:getOrderHistoryResponse&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    mockWebServiceServer<span style=color:#f92672>.</span><span style=color:#a6e22e>expect</span><span style=color:#f92672>(</span>payload<span style=color:#f92672>(</span>requestPayload<span style=color:#f92672>)).</span><span style=color:#a6e22e>andRespond</span><span style=color:#f92672>(</span>withPayload<span style=color:#f92672>(</span>responsePayload<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    OrderHistory orderHistory <span style=color:#f92672>=</span> orderHistoryClient<span style=color:#f92672>.</span><span style=color:#a6e22e>getOrderHistory</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;abc123&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    assertThat<span style=color:#f92672>(</span>orderHistory<span style=color:#f92672>.</span><span style=color:#a6e22e>getOrders</span><span style=color:#f92672>().</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span><span style=color:#ae81ff>2</span><span style=color:#f92672>).</span><span style=color:#a6e22e>getOrderId</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>isEqualTo</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;order3&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    mockWebServiceServer<span style=color:#f92672>.</span><span style=color:#a6e22e>verify</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testGetOrderHistoryOnlyNeededElements</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Source requestPayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns1:getOrderHistoryRequest xmlns:ns1=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:userId&gt;def456&lt;/ns1:userId&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:getOrderHistoryRequest&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Source responsePayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns1:getOrderHistoryResponse xmlns:ns1=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:orderList&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:order&gt;&lt;ns1:orderId&gt;order4&lt;/ns1:orderId&gt;&lt;ns1:orderName&gt;order-name-1&lt;/ns1:orderName&gt;&lt;/ns1:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:order&gt;&lt;ns1:orderId&gt;order5&lt;/ns1:orderId&gt;&lt;ns1:orderName&gt;order-name-2&lt;/ns1:orderName&gt;&lt;/ns1:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:order&gt;&lt;ns1:orderId&gt;order6&lt;/ns1:orderId&gt;&lt;ns1:orderName&gt;order-name-3&lt;/ns1:orderName&gt;&lt;/ns1:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:orderList&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:getOrderHistoryResponse&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    mockWebServiceServer<span style=color:#f92672>.</span><span style=color:#a6e22e>expect</span><span style=color:#f92672>(</span>payload<span style=color:#f92672>(</span>requestPayload<span style=color:#f92672>)).</span><span style=color:#a6e22e>andRespond</span><span style=color:#f92672>(</span>withPayload<span style=color:#f92672>(</span>responsePayload<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    OrderHistory orderHistory <span style=color:#f92672>=</span> orderHistoryClient<span style=color:#f92672>.</span><span style=color:#a6e22e>getOrderHistory</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;def456&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    assertThat<span style=color:#f92672>(</span>orderHistory<span style=color:#f92672>.</span><span style=color:#a6e22e>getOrders</span><span style=color:#f92672>().</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span><span style=color:#ae81ff>2</span><span style=color:#f92672>).</span><span style=color:#a6e22e>getOrderId</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>isEqualTo</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;order6&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    mockWebServiceServer<span style=color:#f92672>.</span><span style=color:#a6e22e>verify</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testGetOrderHistoryMinimumAssumptions</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Source requestPayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns1:getOrderHistoryRequest xmlns:ns1=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:userId&gt;ghi789&lt;/ns1:userId&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:getOrderHistoryRequest&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Source responsePayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns1:getOrderHistoryResponse xmlns:ns1=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:newWrapper&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:orderList&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:order&gt;&lt;ns1:orderId&gt;order7&lt;/ns1:orderId&gt;&lt;/ns1:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:order&gt;&lt;ns1:orderId&gt;order8&lt;/ns1:orderId&gt;&lt;/ns1:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:order&gt;&lt;ns1:orderId&gt;order9&lt;/ns1:orderId&gt;&lt;/ns1:order&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:orderList&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:newWrapper&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:getOrderHistoryResponse&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    mockWebServiceServer<span style=color:#f92672>.</span><span style=color:#a6e22e>expect</span><span style=color:#f92672>(</span>payload<span style=color:#f92672>(</span>requestPayload<span style=color:#f92672>)).</span><span style=color:#a6e22e>andRespond</span><span style=color:#f92672>(</span>withPayload<span style=color:#f92672>(</span>responsePayload<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    OrderHistory orderHistory <span style=color:#f92672>=</span> orderHistoryClient<span style=color:#f92672>.</span><span style=color:#a6e22e>getOrderHistory</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;ghi789&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    assertThat<span style=color:#f92672>(</span>orderHistory<span style=color:#f92672>.</span><span style=color:#a6e22e>getOrders</span><span style=color:#f92672>().</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span><span style=color:#ae81ff>2</span><span style=color:#f92672>).</span><span style=color:#a6e22e>getOrderId</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>isEqualTo</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;order9&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    mockWebServiceServer<span style=color:#f92672>.</span><span style=color:#a6e22e>verify</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>For testing the server part, the <code>TicketAgentEndpointTest</code> is used. Again the first <code>testGetOrderHistory()</code> test case verifies the correct working of the service endpoint.</p><p>The second <code>testGetOrderHistoryOnlyNeededElements()</code> test case illustrates the scenario in which a client is sending additional information which is no longer supported by the service. If the endpoint is able to extract the information needed to execute the request (in this case the <code>'userId'</code> element), it simply ignores the <code>'userName'</code> element that is no longer supported.</p><p>A third <code>testGetOrderHistoryMinimumAssumptions()</code> test case simulates the scenario where the service definition has been updated so that the <code>'userId'</code> element is no longer wrapped in an <code>'oldWrapper'</code> element. The clients which still use the <code>'oldWrapper'</code> element don&rsquo;t need to change as the endpoint is able to handle the requests of both the old and new service version because there is no assumption on the absolute location of the <code>'userId'</code> element in the received XML.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.codenotfound.ws.endpoint<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import static</span> org.springframework.ws.test.server.RequestCreators.withPayload<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import static</span> org.springframework.ws.test.server.ResponseMatchers.payload<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.xml.transform.Source<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.Before<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.Test<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.runner.RunWith<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Autowired<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.boot.test.context.SpringBootTest<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.ApplicationContext<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.test.context.junit4.SpringRunner<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.ws.test.server.MockWebServiceClient<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.xml.transform.StringSource<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RunWith</span><span style=color:#f92672>(</span>SpringRunner<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SpringBootTest</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TicketAgentEndpointTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> ApplicationContext applicationContext<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> MockWebServiceClient mockClient<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Before</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>createClient</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    mockClient <span style=color:#f92672>=</span> MockWebServiceClient<span style=color:#f92672>.</span><span style=color:#a6e22e>createClient</span><span style=color:#f92672>(</span>applicationContext<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testGetOrderHistory</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Source requestPayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns1:getOrderHistoryRequest xmlns:ns1=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:userId&gt;jkl123&lt;/ns1:userId&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:getOrderHistoryRequest&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Source responsePayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns2:getOrderHistoryResponse xmlns:ns2=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:orderList&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:order&gt;&lt;ns2:orderId&gt;order0&lt;/ns2:orderId&gt;&lt;/ns2:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:order&gt;&lt;ns2:orderId&gt;order1&lt;/ns2:orderId&gt;&lt;/ns2:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:order&gt;&lt;ns2:orderId&gt;order2&lt;/ns2:orderId&gt;&lt;/ns2:order&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns2:orderList&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns2:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns2:getOrderHistoryResponse&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    mockClient<span style=color:#f92672>.</span><span style=color:#a6e22e>sendRequest</span><span style=color:#f92672>(</span>withPayload<span style=color:#f92672>(</span>requestPayload<span style=color:#f92672>)).</span><span style=color:#a6e22e>andExpect</span><span style=color:#f92672>(</span>payload<span style=color:#f92672>(</span>responsePayload<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testGetOrderHistoryOnlyNeededElements</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Source requestPayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns1:getOrderHistoryRequest xmlns:ns1=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:userId&gt;mno123&lt;/ns1:userId&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:userName&gt;user-name&lt;/ns1:userName&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:getOrderHistoryRequest&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Source responsePayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns2:getOrderHistoryResponse xmlns:ns2=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:orderList&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:order&gt;&lt;ns2:orderId&gt;order0&lt;/ns2:orderId&gt;&lt;/ns2:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:order&gt;&lt;ns2:orderId&gt;order1&lt;/ns2:orderId&gt;&lt;/ns2:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:order&gt;&lt;ns2:orderId&gt;order2&lt;/ns2:orderId&gt;&lt;/ns2:order&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns2:orderList&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns2:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns2:getOrderHistoryResponse&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    mockClient<span style=color:#f92672>.</span><span style=color:#a6e22e>sendRequest</span><span style=color:#f92672>(</span>withPayload<span style=color:#f92672>(</span>requestPayload<span style=color:#f92672>)).</span><span style=color:#a6e22e>andExpect</span><span style=color:#f92672>(</span>payload<span style=color:#f92672>(</span>responsePayload<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testGetOrderHistoryMinimumAssumptions</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Source requestPayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns1:getOrderHistoryRequest xmlns:ns1=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:oldWrapper&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns1:userId&gt;pqr123&lt;/ns1:userId&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:oldWrapper&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns1:getOrderHistoryRequest&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Source responsePayload <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringSource<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;ns2:getOrderHistoryResponse xmlns:ns2=\&#34;http://codenotfound.com/types/orderhistory\&#34;&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:orderList&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:order&gt;&lt;ns2:orderId&gt;order0&lt;/ns2:orderId&gt;&lt;/ns2:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:order&gt;&lt;ns2:orderId&gt;order1&lt;/ns2:orderId&gt;&lt;/ns2:order&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;ns2:order&gt;&lt;ns2:orderId&gt;order2&lt;/ns2:orderId&gt;&lt;/ns2:order&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns2:orderList&gt;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns2:orderHistory&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/ns2:getOrderHistoryResponse&gt;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    mockClient<span style=color:#f92672>.</span><span style=color:#a6e22e>sendRequest</span><span style=color:#f92672>(</span>withPayload<span style=color:#f92672>(</span>requestPayload<span style=color:#f92672>)).</span><span style=color:#a6e22e>andExpect</span><span style=color:#f92672>(</span>payload<span style=color:#f92672>(</span>responsePayload<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>In order to run the example, open up a command prompt and execute following Maven command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mvn test
</span></span></code></pre></div><p>This should result in a successful test run as shown below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  .   ____          _            __ _ _
</span></span><span style=display:flex><span> /<span style=color:#ae81ff>\\</span> / ___<span style=color:#e6db74>&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>( ( )\___ | &#39;</span>_ | <span style=color:#e6db74>&#39;_| | &#39;</span>_ <span style=color:#ae81ff>\/</span> _<span style=color:#e6db74>`</span> | <span style=color:#ae81ff>\ \ \ \
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> <span style=color:#ae81ff>\\</span>/  ___<span style=color:#f92672>)</span>| |_<span style=color:#f92672>)</span>| | | | | <span style=color:#f92672>||</span> <span style=color:#f92672>(</span>_| |  <span style=color:#f92672>)</span> <span style=color:#f92672>)</span> <span style=color:#f92672>)</span> <span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;  |____| .__|_| |_|_| |_\__, | / / / /
</span></span></span><span style=display:flex><span><span style=color:#e6db74> =========|_|==============|___/=/_/_/_/
</span></span></span><span style=display:flex><span><span style=color:#e6db74> :: Spring Boot ::        (v1.5.9.RELEASE)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>22:22:50.714 [main] INFO  c.c.ws.client.OrderHistoryClientTest - Starting OrderHistoryClientTest on cnf-pc with PID 3132 (started by CodeNotFound in c:\code\spring-ws\spring-ws-tolerant-reader)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>22:22:50.717 [main] INFO  c.c.ws.client.OrderHistoryClientTest - No active profile set, falling back to default profiles: default
</span></span></span><span style=display:flex><span><span style=color:#e6db74>22:22:52.495 [main] INFO  c.c.ws.client.OrderHistoryClientTest - Started OrderHistoryClientTest in 2.033 seconds (JVM running for 2.716)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>22:22:52.611 [main] INFO  c.c.ws.client.OrderHistoryClient - found &#39;</span>3<span style=color:#e6db74>&#39; orders for userId=&#39;</span>abc123<span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>22:22:52.654 [main] INFO  c.c.ws.client.OrderHistoryClient - found &#39;</span>3<span style=color:#e6db74>&#39; orders for userId=&#39;</span>ghi789<span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>22:22:52.663 [main] INFO  c.c.ws.client.OrderHistoryClient - found &#39;</span>3<span style=color:#e6db74>&#39; orders for userId=&#39;</span>def456<span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.268 sec - in com.codenotfound.ws.client.OrderHistoryClientTest
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Running com.codenotfound.ws.endpoint.TicketAgentEndpointTest
</span></span></span><span style=display:flex><span><span style=color:#e6db74>22:22:52.694 [main] INFO  c.c.ws.endpoint.OrderHistoryEndpoint - received request for order history of userId=&#39;</span>jkl123<span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>22:22:52.711 [main] INFO  c.c.ws.endpoint.OrderHistoryEndpoint - received request for order history of userId=&#39;</span>pqr123<span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>22:22:52.721 [main] INFO  c.c.ws.endpoint.OrderHistoryEndpoint - received request for order history of userId=&#39;</span>mno123<span style=color:#960050;background-color:#1e0010>&#39;</span>
</span></span><span style=display:flex><span>Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.037 sec - in com.codenotfound.ws.endpoint.TicketAgentEndpointTest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Results :
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Tests run: 6, Failures: 0, Errors: 0, Skipped: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> ------------------------------------------------------------------------
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> BUILD SUCCESS
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> ------------------------------------------------------------------------
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> Total time: 4.647 s
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> Finished at: 2017-07-19T22:22:52+02:00
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> Final Memory: 19M/222M
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> ------------------------------------------------------------------------
</span></span></code></pre></div><div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"><span class="text-primary-400 ltr:pr-3 rtl:pl-3"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span><span class=dark:text-neutral-300>If you would like to run the above code sample you can get the <a href=https://github.com/code-not-found/spring-ws/tree/master/spring-ws-tolerant-reader target=_blank>full source code on GitHub</a>.</span></div><p>In this tutorial, we illustrated the tolerant reader pattern using a concrete example and then implemented it in Java using the Spring Boot microservices framework in combination with Spring WS.</p><p>Any other techniques you know of on how to make a SOAP service consumer or provider more tolerant? Let us know by leaving a comment below!</p></div></section><footer class="pt-8 max-w-prose print:hidden"><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://codenotfound.com/spring-ws-soap-tolerant-reader-example.html&quote=Spring%20WS%20-%20SOAP%20Tolerant%20Reader%20Example" title="Share on Facebook" aria-label="Share on Facebook"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://codenotfound.com/spring-ws-soap-tolerant-reader-example.html&text=Spring%20WS%20-%20SOAP%20Tolerant%20Reader%20Example" title="Tweet on Twitter" aria-label="Tweet on Twitter"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://codenotfound.com/spring-ws-soap-tolerant-reader-example.html&resubmit=true&title=Spring%20WS%20-%20SOAP%20Tolerant%20Reader%20Example" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&url=https://codenotfound.com/spring-ws-soap-tolerant-reader-example.html&title=Spring%20WS%20-%20SOAP%20Tolerant%20Reader%20Example" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a></section><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="group flex" href=/spring-ws-soap-header-example.html><span class="mr-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-2 text-neutral-700 transition-transform group-hover:translate-x-[2px] group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Spring WS - SOAP Header Example</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"></span></span></a></span><span><a class="group flex text-right" href=/apache-cxf-logging-soap-request-response-fault-messages-example.html><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Apache CXF - Logging SOAP Request Response Fault Messages Example</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"></span></span><span class="ml-2 text-neutral-700 transition-transform group-hover:translate-x-[2px] group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div class="pointer-events-none absolute top-[100vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class="py-10 print:hidden"><nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/terms-of-service/ title="Terms of Service">Terms of Service</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/privacy-policy/ title="Privacy Policy">Privacy Policy</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/contact/ title=Contact>Contact</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>Tags</a></li></ul></nav><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400"> 2022 CodeNotFound - CC BY-NC-ND</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://git.io/hugo-congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher type=button><div class="flex items-center justify-center w-12 h-12 dark:hidden" title="Switch to dark appearance"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden w-12 h-12 dark:flex" title="Switch to light appearance"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div></footer></div></body></html>