<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="rgb(255,255,255)"><meta http-equiv=x-ua-compatible content="ie=edge"><title>JMS - ActiveMQ Message Priority Example &#183; CodeNotFound</title><meta name=title content="JMS - ActiveMQ Message Priority Example &#183; CodeNotFound"><meta name=description content="A detailed example using ActiveMQ that shows how to specify a priority level when sending a JMS message to a queue."><link rel=canonical href=https://codenotfound.com/jms-activemq-message-priority-example.html><link type=text/css rel=stylesheet href=/css/main.bundle.min.53352e9ffc441cd3959b7ecac29943a36a9950ad5d92ae00b1cd3fcfef17c757dd0fc99483a8e398aa19d5d0403773ef50573ab0a1339e4271cd2259cacbcef6.css integrity="sha512-UzUun/xEHNOVm37KwplDo2qZUK1dkq4Asc0/z+8Xx1fdD8mUg6jjmKoZ1dBAN3PvUFc6sKEznkJxzSJZysvO9g=="><script type=text/javascript src=/js/appearance.min.1e44157c1e51b46341ce2c94716dd3dd1ef30c28e7d1c9f3b9db80877bfe72bc66b00d8a662f317840016acbed93c5f18c3d9268c8b957021ee74d0b04adf6c5.js integrity="sha512-HkQVfB5RtGNBziyUcW3T3R7zDCjn0cnzuduAh3v+crxmsA2KZi8xeEABasvtk8XxjD2SaMi5VwIe500LBK32xQ=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.9947db70e5b36e741e53f8531bd734741b3fc7a688f7b5d749fc5433c48efc252f47bdf44e471570a550fc051b87712799014040e6349b38d64448b94e84e45a.js integrity="sha512-mUfbcOWzbnQeU/hTG9c0dBs/x6aI97XXSfxUM8SO/CUvR730TkcVcKVQ/AUbh3EnmQFAQOY0mzjWREi5ToTkWg==" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="JMS - ActiveMQ Message Priority Example"><meta property="og:description" content="A detailed example using ActiveMQ that shows how to specify a priority level when sending a JMS message to a queue."><meta property="og:type" content="article"><meta property="og:url" content="https://codenotfound.com/jms-activemq-message-priority-example.html"><meta property="article:section" content="blog"><meta property="article:published_time" content="2014-01-18T00:00:00+00:00"><meta property="article:modified_time" content="2014-01-18T00:00:00+00:00"><meta property="og:site_name" content="CodeNotFound"><meta name=twitter:card content="summary"><meta name=twitter:title content="JMS - ActiveMQ Message Priority Example"><meta name=twitter:description content="A detailed example using ActiveMQ that shows how to specify a priority level when sending a JMS message to a queue."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Blog","name":"JMS - ActiveMQ Message Priority Example","headline":"JMS - ActiveMQ Message Priority Example","abstract":"A detailed example using ActiveMQ that shows how to specify a priority level when sending a JMS message to a queue.","inLanguage":"en","url":"https:\/\/codenotfound.com\/jms-activemq-message-priority-example.html","author":{"@type":"Person","name":"CodeNotFound"},"copyrightYear":"2014","dateCreated":"2014-01-18T00:00:00\u002b00:00","datePublished":"2014-01-18T00:00:00\u002b00:00","dateModified":"2014-01-18T00:00:00\u002b00:00","keywords":["posts","jms","apache activemq"],"mainEntityOfPage":"true","wordCount":"1716"}]</script><meta name=author content="CodeNotFound"><link href=https://github.com/code-not-found rel=me><link href=https://stackoverflow.com/users/4201470/codenotfound rel=me><link href=https://twitter.com/CodeNotFoundcom rel=me></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral print:hidden sm:py-10"><nav class="flex items-start justify-between sm:items-center"><div class="flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>CodeNotFound</a></div><ul class="flex list-none flex-col ltr:text-right rtl:text-left sm:flex-row"><li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/blog/ title=Blog>Blog</a></li><li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tutorials/ title=Tutorials>Tutorials</a></li><li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/about/ title=About>About</a></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header class=max-w-prose><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">JMS - ActiveMQ Message Priority Example</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><span title="Reading time">9 mins</span></div></div></header><section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert"><div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last"><div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden"><details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#setting-jms-message-priority-levels>Setting JMS Message Priority Levels</a></li><li><a href=#activemq-message-priority-example>ActiveMQ Message Priority Example</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><p>Priority levels are a powerful instrument on JMS messages which allow building robust applications where for example peak traffic will not block important messages (set with a higher priority) from getting through the queue.</p><p>The following post explains the basics of JMS priority and illustrates them with a code sample using ActiveMQ and Maven.</p><div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"><span class="text-primary-400 ltr:pr-3 rtl:pl-3"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentcolor" d="M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438.0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1H112L112.1 454.3zM191.4.0132C89.44.3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8 16.53 18.84 42.34 58.23 52.22 91.45.0313.25.0938.5166.125.7823h160.2c.0313-.2656.0938-.5166.125-.7823 9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1 368 78.61 288.9-.2837 191.4.0132zM192 96.01c-44.13.0-80 35.89-80 79.1.0 9.69-7.2 16.89-16 16.89S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1 8.844.0 16 7.159 16 16S200.8 96.01 192 96.01z"/></svg></span></span><span class=dark:text-neutral-300>If you want to learn more about JMS - head on over to the <a href=https://codenotfound.com/jms-tutorials/ target=_blank>JMS tutorials</a> page.</span></div><h2 id=setting-jms-message-priority-levels class="relative group">Setting JMS Message Priority Levels <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#setting-jms-message-priority-levels aria-label=Anchor>#</a></span></h2><p>Message priority levels can be used to instruct the JMS provider to deliver urgent messages first. The message&rsquo;s priority is contained in the <a href=https://codenotfound.com/jms-message-types-properties-overview.html#jms-message-headers>JMSPriority header</a>. There are ten levels of priority, ranging from 0 (lowest) to 9 (highest). If you do not specify a priority level, the default level is set to 4.</p><p>You can set the priority level in either of two ways:</p><ul><li>You can use the <code>setPriority()</code> method of the <code>MessageProducer</code> interface to set the priority level for all messages sent by that producer. For example, the following call sets a priority level of &lsquo;7&rsquo; for a producer:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>producer<span style=color:#f92672>.</span><span style=color:#a6e22e>setPriority</span><span style=color:#f92672>(</span><span style=color:#ae81ff>7</span><span style=color:#f92672>);</span>
</span></span></code></pre></div><ul><li>You can use the long form of the <code>send()</code> or the <code>publish()</code> method to set the priority level for a specific message. The third argument sets the priority level. For example, the following send call sets the priority level for message to &lsquo;3&rsquo;:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>producer<span style=color:#f92672>.</span><span style=color:#a6e22e>send</span><span style=color:#f92672>(</span>message<span style=color:#f92672>,</span> DeliveryMode<span style=color:#f92672>.</span><span style=color:#a6e22e>NON_PERSISTENT</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>);</span>
</span></span></code></pre></div><blockquote><p>Setting the priority directly on the JMS Message using the <code>setJMSPriority()</code> method of the <code>Message</code> interface does not work as in that case the priority of the producer is taken!</p></blockquote><p>It is very interesting to have a look at what the <a href=http://www.oracle.com/technetwork/java/docs-136352.html target=_blank>Java Message Service 1.1 Specification</a> has to say about priority and the different levels as it gives a better understanding of what can be achieved when used:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>JMS defines a ten-level priority value, with 0 as the lowest priority and 9 as 
</span></span><span style=display:flex><span>the highest. In addition, clients should consider priorities 0-4 as gradations 
</span></span><span style=display:flex><span>of normal priority and priorities 5-9 as gradations of expedited priority.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>JMS does not require that a provider strictly implement priority ordering of 
</span></span><span style=display:flex><span>messages; however, it should do its best to deliver expedited messages ahead of 
</span></span><span style=display:flex><span>normal messages.
</span></span></code></pre></div><blockquote><p>When implementing JMS priority it is important to realize that correct configuration of the JMS provider and consumers/producers is key in getting higher-priority messages delivered before lower-priority ones. It is also important to note that <strong>the JMS specification does not mandate a provider to implement a strict priority ordering of messages</strong>.</p></blockquote><p>For example <a href=http://activemq.apache.org/how-can-i-support-priority-queues.html target=_blank>on ActiveMQ, there are a number of settings that need to be made in order to support message priority</a>. A typical example is lowering the consumer prefetch to 1 to ensure getting the high priority messages from the store ahead of lower priority messages. However this sort of tradeoff can have significant performance implications, so always test your scenarios thoroughly.</p><p>Checkout following link if you would like to <a href=http://blog.christianposta.com/activemq/activemq-message-priorities-how-it-works/ target=_blank>know more about how ActiveMQ message priorities work</a>.</p><h2 id=activemq-message-priority-example class="relative group">ActiveMQ Message Priority Example <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#activemq-message-priority-example aria-label=Anchor>#</a></span></h2><p>The below example uses Maven and assumes an ActiveMQ message broker is installed and up and running.</p><p>Tools used:</p><ul><li>ActiveMQ 5.15</li><li>Maven 3.5</li></ul><p>Let&rsquo;s illustrate JMS priority by creating a simple producer with two different <code>send()</code> methods. The first method will send a message to a queue with the default priority level and the second method will accept an additional parameter specifying the priority to be set on the message. We will then create a consumer to read the messages from the queue and observe in which order they are read.</p><p>First let&rsquo;s look at the below <a href=https://maven.apache.org/ target=_blank>Maven</a> POM file which contains the needed dependencies for Logback, JUnit and <a href=http://activemq.apache.org/ target=_blank>Apache ActiveMQ</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;project</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;modelVersion&gt;</span>4.0.0<span style=color:#f92672>&lt;/modelVersion&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;groupId&gt;</span>com.codenotfound<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;artifactId&gt;</span>jms-activemq-priority<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;version&gt;</span>0.0.1-SNAPSHOT<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;packaging&gt;</span>jar<span style=color:#f92672>&lt;/packaging&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;name&gt;</span>JMS - ActiveMQ Message Priority Example<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;description&gt;</span>JMS - ActiveMQ Message Priority Example<span style=color:#f92672>&lt;/description&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;url&gt;</span>https://www.codenotfound.com/jms-activemq-message-priority-example.html<span style=color:#f92672>&lt;/url&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;project.build.sourceEncoding&gt;</span>UTF-8<span style=color:#f92672>&lt;/project.build.sourceEncoding&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;java.version&gt;</span>1.8<span style=color:#f92672>&lt;/java.version&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;logback.version&gt;</span>1.2.3<span style=color:#f92672>&lt;/logback.version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;slf4j.version&gt;</span>1.7.25<span style=color:#f92672>&lt;/slf4j.version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;junit.version&gt;</span>4.12<span style=color:#f92672>&lt;/junit.version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;activemq.version&gt;</span>5.15.2<span style=color:#f92672>&lt;/activemq.version&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;maven-compiler-plugin.version&gt;</span>3.7.0<span style=color:#f92672>&lt;/maven-compiler-plugin.version&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- Logging --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;groupId&gt;</span>org.slf4j<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;artifactId&gt;</span>slf4j-api<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;version&gt;</span>${slf4j.version}<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;groupId&gt;</span>ch.qos.logback<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;artifactId&gt;</span>logback-classic<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;version&gt;</span>${ch.qos.logback.version}<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- JUnit --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;groupId&gt;</span>junit<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;artifactId&gt;</span>junit<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;version&gt;</span>${junit.version}<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;scope&gt;</span>test<span style=color:#f92672>&lt;/scope&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- ActiveMQ --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;groupId&gt;</span>org.apache.activemq<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;artifactId&gt;</span>activemq-all<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;version&gt;</span>${activemq.version}<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;build&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;plugins&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>org.apache.maven.plugins<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>maven-compiler-plugin<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>${maven-compiler-plugin.version}<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;source&gt;</span>${java.version}<span style=color:#f92672>&lt;/source&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;target&gt;</span>${java.version}<span style=color:#f92672>&lt;/target&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/plugins&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/build&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/project&gt;</span>
</span></span></code></pre></div><p>Next is the <code>Producer</code> class which contains the two <code>send()</code> methods: one which applies default priority and one which applies a custom priority. The class also contains two methods for opening/closing a connection to the message broker as well as a method for creating the message producer.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.codenotfound.jms.priority<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.Connection<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.ConnectionFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.DeliveryMode<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.Destination<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.JMSException<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.MessageProducer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.Session<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.TextMessage<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.activemq.ActiveMQConnection<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.activemq.ActiveMQConnectionFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.slf4j.Logger<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.slf4j.LoggerFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Producer</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Logger LOGGER <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>      LoggerFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>getLogger</span><span style=color:#f92672>(</span>Producer<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> Connection connection<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> Session session<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> MessageProducer producer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>openConnection</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> JMSException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create a new connection factory
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    ConnectionFactory connectionFactory <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span> ActiveMQConnectionFactory<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>            ActiveMQConnection<span style=color:#f92672>.</span><span style=color:#a6e22e>DEFAULT_BROKER_URL</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    connection <span style=color:#f92672>=</span> connectionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>createConnection</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>closeConnection</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> JMSException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    connection<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>createProducer</span><span style=color:#f92672>(</span>String queue<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> JMSException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create a session for sending messages
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    session <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>        connection<span style=color:#f92672>.</span><span style=color:#a6e22e>createSession</span><span style=color:#f92672>(</span><span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> Session<span style=color:#f92672>.</span><span style=color:#a6e22e>AUTO_ACKNOWLEDGE</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create the destination to which messages will be sent
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Destination destination <span style=color:#f92672>=</span> session<span style=color:#f92672>.</span><span style=color:#a6e22e>createQueue</span><span style=color:#f92672>(</span>queue<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create a MessageProducer for sending the messages
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    producer <span style=color:#f92672>=</span> session<span style=color:#f92672>.</span><span style=color:#a6e22e>createProducer</span><span style=color:#f92672>(</span>destination<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>send</span><span style=color:#f92672>(</span>String text<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> JMSException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    TextMessage message <span style=color:#f92672>=</span> session<span style=color:#f92672>.</span><span style=color:#a6e22e>createTextMessage</span><span style=color:#f92672>(</span>text<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    producer<span style=color:#f92672>.</span><span style=color:#a6e22e>send</span><span style=color:#f92672>(</span>message<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    LOGGER<span style=color:#f92672>.</span><span style=color:#a6e22e>info</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;{} sent with default priority(=4)&#34;</span><span style=color:#f92672>,</span> text<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>send</span><span style=color:#f92672>(</span>String text<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> priority<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> JMSException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    TextMessage message <span style=color:#f92672>=</span> session<span style=color:#f92672>.</span><span style=color:#a6e22e>createTextMessage</span><span style=color:#f92672>(</span>text<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Note: setting the priority directly on the JMS Message does not work
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// as in that case the priority of the producer is taken
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    producer<span style=color:#f92672>.</span><span style=color:#a6e22e>send</span><span style=color:#f92672>(</span>message<span style=color:#f92672>,</span> DeliveryMode<span style=color:#f92672>.</span><span style=color:#a6e22e>PERSISTENT</span><span style=color:#f92672>,</span> priority<span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    LOGGER<span style=color:#f92672>.</span><span style=color:#a6e22e>info</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;{} sent with priority={}&#34;</span><span style=color:#f92672>,</span> text<span style=color:#f92672>,</span> priority<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>For receiving the messages, a <code>Consumer</code> class is created with two methods for opening/closing a connection to the message broker. In addition, a method to create a message consumer for a specific queue and a method to receive a single message are available on the class.</p><blockquote><p>Note that instead of using the default connection to the ActiveMQ broker, we have specified the <code>'messagePrioritySupported'</code> property in order to assure the message are prioritized on the consumer side.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.codenotfound.jms.priority<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.Connection<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.ConnectionFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.Destination<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.JMSException<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.Message<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.MessageConsumer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.Session<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.TextMessage<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.activemq.ActiveMQConnectionFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.slf4j.Logger<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.slf4j.LoggerFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Consumer</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Logger LOGGER <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>      LoggerFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>getLogger</span><span style=color:#f92672>(</span>Consumer<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> Connection connection<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> Session session<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> MessageConsumer consumer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>openConnection</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> JMSException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create a new connection factory
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    ConnectionFactory connectionFactory <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span> ActiveMQConnectionFactory<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;tcp://0.0.0.0:61616?jms.messagePrioritySupported=true&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    connection <span style=color:#f92672>=</span> connectionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>createConnection</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>closeConnection</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> JMSException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    connection<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>createConsumer</span><span style=color:#f92672>(</span>String queue<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> JMSException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create a session for receiving messages
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    session <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>        connection<span style=color:#f92672>.</span><span style=color:#a6e22e>createSession</span><span style=color:#f92672>(</span><span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> Session<span style=color:#f92672>.</span><span style=color:#a6e22e>AUTO_ACKNOWLEDGE</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create the destination from which messages will be received
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Destination destination <span style=color:#f92672>=</span> session<span style=color:#f92672>.</span><span style=color:#a6e22e>createQueue</span><span style=color:#f92672>(</span>queue<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create a MessageConsumer for receiving messages
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    consumer <span style=color:#f92672>=</span> session<span style=color:#f92672>.</span><span style=color:#a6e22e>createConsumer</span><span style=color:#f92672>(</span>destination<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Start the connection in order to receive messages
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    connection<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>receive</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> timeout<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> JMSException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Read a message from the destination
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Message message <span style=color:#f92672>=</span> consumer<span style=color:#f92672>.</span><span style=color:#a6e22e>receive</span><span style=color:#f92672>(</span>timeout<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Cast the message to the correct type
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    TextMessage input <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>TextMessage<span style=color:#f92672>)</span> message<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Retrieve the message content
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    String text <span style=color:#f92672>=</span> input<span style=color:#f92672>.</span><span style=color:#a6e22e>getText</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    LOGGER<span style=color:#f92672>.</span><span style=color:#a6e22e>info</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;{} received&#34;</span><span style=color:#f92672>,</span> text<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> text<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Last, a JUnit test class in which a first <code>testSend()</code> test case will send three messages with default priority to a <code>'priority.q'</code> queue. It then verifies if the messages are read in first in, first out (FIFO) order.</p><p>A second <code>testSendWithPriority()</code> test case which will send three messages with custom priorities where the last message gets the highest priority. In turn, it verifies if the messages are read in last in, first out (LIFO) order.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.codenotfound.jms.priority<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import static</span> org.junit.Assert.assertEquals<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.jms.JMSException<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.AfterClass<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.BeforeClass<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.Test<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProducerTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> Consumer consumer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> Producer producer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> String QUEUE <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;priority.q&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@BeforeClass</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setUpBeforeClass</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> JMSException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    producer <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Producer<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    producer<span style=color:#f92672>.</span><span style=color:#a6e22e>openConnection</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    producer<span style=color:#f92672>.</span><span style=color:#a6e22e>createProducer</span><span style=color:#f92672>(</span>QUEUE<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    consumer <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Consumer<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    consumer<span style=color:#f92672>.</span><span style=color:#a6e22e>openConnection</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    consumer<span style=color:#f92672>.</span><span style=color:#a6e22e>createConsumer</span><span style=color:#f92672>(</span>QUEUE<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@AfterClass</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>tearDownAfterClass</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> JMSException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    producer<span style=color:#f92672>.</span><span style=color:#a6e22e>closeConnection</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    consumer<span style=color:#f92672>.</span><span style=color:#a6e22e>closeConnection</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testSend</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> JMSException<span style=color:#f92672>,</span> InterruptedException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    producer<span style=color:#f92672>.</span><span style=color:#a6e22e>send</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message1&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    producer<span style=color:#f92672>.</span><span style=color:#a6e22e>send</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message2&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    producer<span style=color:#f92672>.</span><span style=color:#a6e22e>send</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message3&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span><span style=color:#ae81ff>10000</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Messages should be received FIFO as priority is the same for all
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    assertEquals<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message1&#34;</span><span style=color:#f92672>,</span> consumer<span style=color:#f92672>.</span><span style=color:#a6e22e>receive</span><span style=color:#f92672>(</span><span style=color:#ae81ff>5000</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    assertEquals<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message2&#34;</span><span style=color:#f92672>,</span> consumer<span style=color:#f92672>.</span><span style=color:#a6e22e>receive</span><span style=color:#f92672>(</span><span style=color:#ae81ff>5000</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    assertEquals<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message3&#34;</span><span style=color:#f92672>,</span> consumer<span style=color:#f92672>.</span><span style=color:#a6e22e>receive</span><span style=color:#f92672>(</span><span style=color:#ae81ff>5000</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testSendWithPriority</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>throws</span> JMSException<span style=color:#f92672>,</span> InterruptedException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    producer<span style=color:#f92672>.</span><span style=color:#a6e22e>send</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message1&#34;</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    producer<span style=color:#f92672>.</span><span style=color:#a6e22e>send</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message2&#34;</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    producer<span style=color:#f92672>.</span><span style=color:#a6e22e>send</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message3&#34;</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span><span style=color:#ae81ff>10000</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Messages should be received LIFO as priority=1 is lower than
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// priority=3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    assertEquals<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message3&#34;</span><span style=color:#f92672>,</span> consumer<span style=color:#f92672>.</span><span style=color:#a6e22e>receive</span><span style=color:#f92672>(</span><span style=color:#ae81ff>5000</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    assertEquals<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message2&#34;</span><span style=color:#f92672>,</span> consumer<span style=color:#f92672>.</span><span style=color:#a6e22e>receive</span><span style=color:#f92672>(</span><span style=color:#ae81ff>5000</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    assertEquals<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message1&#34;</span><span style=color:#f92672>,</span> consumer<span style=color:#f92672>.</span><span style=color:#a6e22e>receive</span><span style=color:#f92672>(</span><span style=color:#ae81ff>5000</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Make sure an <a href=https://codenotfound.com/apache-activemq-installation.html>ActiveMQ message broker is up and running</a>, open a command prompt and execute following Maven command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mvn test
</span></span></code></pre></div><p>This will trigger Maven to run the above test case and results in the following log statements. Even though <code>'message1'</code> was sent first in both test cases, in the first test it is received first whereas in the second test it is received last because of the different assigned priority.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>-------------------------------------------------------
</span></span><span style=display:flex><span> T E S T S
</span></span><span style=display:flex><span>-------------------------------------------------------
</span></span><span style=display:flex><span>Running com.codenotfound.jms.priority.ProducerTest
</span></span><span style=display:flex><span>SLF4J: Class path contains multiple SLF4J bindings.
</span></span><span style=display:flex><span>SLF4J: Found binding in <span style=color:#f92672>[</span>jar:file:/C:/code/local-repo/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar!/org/slf4j/impl/StaticLoggerBinder.class<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>SLF4J: Found binding in <span style=color:#f92672>[</span>jar:file:/C:/code/local-repo/org/apache/activemq/activemq-all/5.15.2/activemq-all-5.15.2.jar!/org/slf4j/impl/StaticLoggerBinder.class<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings <span style=color:#66d9ef>for</span> an explanation.
</span></span><span style=display:flex><span>SLF4J: Actual binding is of type <span style=color:#f92672>[</span>ch.qos.logback.classic.util.ContextSelectorStaticBinder<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>21:50:34.705 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Producer<span style=color:#f92672>]</span> message1 sent with default priority<span style=color:#f92672>(=</span>4<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>21:50:34.715 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Producer<span style=color:#f92672>]</span> message2 sent with default priority<span style=color:#f92672>(=</span>4<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>21:50:34.719 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Producer<span style=color:#f92672>]</span> message3 sent with default priority<span style=color:#f92672>(=</span>4<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>21:50:44.721 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Consumer<span style=color:#f92672>]</span> message1 received
</span></span><span style=display:flex><span>21:50:44.722 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Consumer<span style=color:#f92672>]</span> message2 received
</span></span><span style=display:flex><span>21:50:44.723 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Consumer<span style=color:#f92672>]</span> message3 received
</span></span><span style=display:flex><span>21:50:44.736 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Producer<span style=color:#f92672>]</span> message1 sent with priority<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>21:50:44.742 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Producer<span style=color:#f92672>]</span> message2 sent with priority<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>21:50:44.748 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Producer<span style=color:#f92672>]</span> message3 sent with priority<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>21:50:54.749 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Consumer<span style=color:#f92672>]</span> message3 received
</span></span><span style=display:flex><span>21:50:54.750 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Consumer<span style=color:#f92672>]</span> message2 received
</span></span><span style=display:flex><span>21:50:54.750 INFO  <span style=color:#f92672>[</span>main<span style=color:#f92672>][</span>Consumer<span style=color:#f92672>]</span> message1 received
</span></span><span style=display:flex><span>Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 20.622 sec
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Results :
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Tests run: 2, Failures: 0, Errors: 0, Skipped: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> ------------------------------------------------------------------------
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> BUILD SUCCESS
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> ------------------------------------------------------------------------
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> Total time: 22.719 s
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> Finished at: 2018-01-04T21:50:54+01:00
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> Final Memory: 19M/217M
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>INFO<span style=color:#f92672>]</span> ------------------------------------------------------------------------
</span></span></code></pre></div><p>By browsing the <code>'priority.q'</code> using the ActiveMQ console we can verify the <code>JMSPriority</code> header that was set on the messages sent by the above test cases. The <code>testSend()</code> test case will create three messages a shown below, each with priority set to 4.</p><p><figure><img class="my-0 rounded-md" srcset="/apache-activemq-message-browser-no-priority_hu6f7c400d690e30cedc5f4bc6632cb0f9_7259_320x0_resize_q75_h2_mitchellnetravali_3.webp 320w,
/apache-activemq-message-browser-no-priority_hu6f7c400d690e30cedc5f4bc6632cb0f9_7259_480x0_resize_q75_h2_mitchellnetravali_3.webp 480w,
/apache-activemq-message-browser-no-priority_hu6f7c400d690e30cedc5f4bc6632cb0f9_7259_640x0_resize_q75_h2_mitchellnetravali_3.webp 640w" src=/apache-activemq-message-browser-no-priority_hu6f7c400d690e30cedc5f4bc6632cb0f9_7259_640x0_resize_mitchellnetravali_3.png alt="apache activemq message browser no priority"></figure></p><p>The second <code>testSendWithPriority()</code> test case results in three messages, each with a different priority ranging from 1 till 3.</p><p><figure><img class="my-0 rounded-md" srcset="/apache-activemq-message-browser-with-priority_hu18ff036f2ccdeb0401fa4e87dfb87b6c_7183_320x0_resize_q75_h2_mitchellnetravali_3.webp 320w,
/apache-activemq-message-browser-with-priority_hu18ff036f2ccdeb0401fa4e87dfb87b6c_7183_480x0_resize_q75_h2_mitchellnetravali_3.webp 480w,
/apache-activemq-message-browser-with-priority_hu18ff036f2ccdeb0401fa4e87dfb87b6c_7183_640x0_resize_q75_h2_mitchellnetravali_3.webp 640w" src=/apache-activemq-message-browser-with-priority_hu18ff036f2ccdeb0401fa4e87dfb87b6c_7183_640x0_resize_mitchellnetravali_3.png alt="apache activemq message browser with priority"></figure></p><div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"><span class="text-primary-400 ltr:pr-3 rtl:pl-3"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span><span class=dark:text-neutral-300>If you would like to run the above code sample you can get the <a href=https://github.com/code-not-found/jms/tree/master/jms-activemq-priority target=_blank>full source code on GitHub</a>.</span></div><p>This concludes the example on how to use JMS message priority using ActiveMQ. If you found this post helpful or have any questions or remarks, please leave a comment.</p></div></section><footer class="pt-8 max-w-prose print:hidden"><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://codenotfound.com/jms-activemq-message-priority-example.html&quote=JMS%20-%20ActiveMQ%20Message%20Priority%20Example" title="Share on Facebook" aria-label="Share on Facebook"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://codenotfound.com/jms-activemq-message-priority-example.html&text=JMS%20-%20ActiveMQ%20Message%20Priority%20Example" title="Tweet on Twitter" aria-label="Tweet on Twitter"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://codenotfound.com/jms-activemq-message-priority-example.html&resubmit=true&title=JMS%20-%20ActiveMQ%20Message%20Priority%20Example" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&url=https://codenotfound.com/jms-activemq-message-priority-example.html&title=JMS%20-%20ActiveMQ%20Message%20Priority%20Example" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a></section><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="group flex" href=/jms-message-types-properties-overview.html><span class="mr-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-2 text-neutral-700 transition-transform group-hover:translate-x-[2px] group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">JMS - Message Types and Properties Overview</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"></span></span></a></span><span><a class="group flex text-right" href=/jsf-primefaces-hello-world-example-jetty-maven.html><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">JSF - PrimeFaces Hello World Example using Jetty and Maven</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"></span></span><span class="ml-2 text-neutral-700 transition-transform group-hover:translate-x-[2px] group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer><script src=https://utteranc.es/client.js repo=code-not-found/codenotfound-blog-comments issue-term=pathname label=comment theme=preferred-color-scheme crossorigin=anonymous async></script></article><div class="pointer-events-none absolute top-[100vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class="py-10 print:hidden"><nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/terms-of-service/ title="Terms of Service">Terms of Service</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/privacy-policy/ title="Privacy Policy">Privacy Policy</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/contact/ title=Contact>Contact</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>Tags</a></li></ul></nav><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">© 2022 CodeNotFound - CC BY-NC-ND</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://git.io/hugo-congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher type=button><div class="flex items-center justify-center w-12 h-12 dark:hidden" title="Switch to dark appearance"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden w-12 h-12 dark:flex" title="Switch to light appearance"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div></footer></div></body></html>